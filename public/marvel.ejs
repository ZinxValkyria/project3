<%- include('header.ejs'); %>

  <title>Marvel Character App</title>
</head>

<body>
  <h1>Welcome to the Marvel Character App!</h1>
  <form id="characterForm">
    <label for="characterName">Enter Character Name and hit return to search:</label>
    <input type="text" id="characterName" name="character" placeholder="Wolverine" >
    <!-- <button type="submit">Get Character Info</button> -->
  </form>
  <div id="characterInfo"></div>

  <script id="result">
    document.getElementById('characterForm').addEventListener('submit', function (event) {
      event.preventDefault();
      const characterName = document.getElementById('characterName').value;
      fetch(`/api/character?character=${characterName}`)
        .then(response => response.json())
        .then(data => {
          const characterInfoContainer = document.getElementById('characterInfo');
          characterInfoContainer.innerHTML = `
            <h2>${data.name}</h2>
            <img src="${data.thumbnail}" alt="${data.name}">
            <p>Description: ${data.description}</p>
            <p>ID: ${data.id}</p>
            <p>Modified: ${data.modified}</p>
            <p>Resource URI: ${data.resourceURI}</p>
            <p>Comics: ${data.comics.available}</p>
            <p>Series: ${data.series.available}</p>
            <p>Stories: ${data.stories.available}</p>
            <p>Events: ${data.events.available}</p>
            
            <p>URLs:</p>
            <ul>
              ${data.urls.map(url => `<li><a href="${url.url}" target="_blank">${url.type}</a></li>`).join('')}
            </ul>
          `;
        })
        .catch(error => {
          console.error('Error fetching character data:', error.message);
          document.getElementById('characterInfo').innerHTML = '<p>Failed to fetch character data.</p>';
        });
    });
  </script>
  
</body>
<footer><%- include('footer.ejs'); %></footer>
</html>
